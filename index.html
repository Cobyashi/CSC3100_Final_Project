<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwollenHippo - Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/pulse/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark">
    <div class="d-flex justify-content-center align-items-center vh-100">
        <form class="card col-12 col-md-5 col-lg-4" id="frmLogin">
            <div class="card-body">
                <h1 class="text-center mb-0 text-primary">SwollenHippo Medical Records System</h1>
                <h3 class="text-center mt-3">Login</h3>
                <input id="txtUsername" class="form-control mt-4" type="email" placeholder="johndoe@email.com" aria-label="email">
                <input id="txtPassword" class="form-control mt-2" type="password" placeholder="password" aria-label="password">
                <hr />
                <button class="btn btn-primary col-12 mt-2" type="button" id="btnLogin">Log in</button>
                <button class="btn btn-link col-12 mt-2" type="button" id="btnSwapLogin">Need an account? Register here</button>
            </div>
        </form>
        <form class="card col-12 col-md-5 col-lg-4" id="frmRegister" style="display:none;">
            <div class="card-body">
                <div class="d-flex justify-content-center align-items-center vh-100">
                    <form class="card col-12 col-md-5 col-lg-4">
                        <div class="card-body">
                            <h1 class="text-center">SwollenHippo Electronic Medical Records System</h1>
                            <h3 class="text-center">Registration form</h3>
                            <div class="d-flex justify-content-center align-items-center vh-40" style="max-width: 100%;">
                                <input id="txtRegisterUsername" class="form-control mt-3 mr-2" type="email" placeholder="johndoe@email.com" aria-label="email">
                                <input id="txtRegisterPassword" class="form-control mt-3 mr-2" type="password" placeholder="Password" aria-label="password">
                                <input id="txtConfirmPasswd" class="form-control mt-3" type="password" placeholder="Confirm Password" aria-label="confirm password">
                            </div>
                            <div class="d-flex justify-content-center align-items-center vh-40" style="max-width: 100%;">
                                <input id="txtFirstname" class="form-control mt-3 mr-2" type="text" placeholder="John" aria-label="First Name">
                                <input id="txtMiddlename" class="form-control mt-3 mr-2" type="text" placeholder="Smith" aria-label="Middle Name">
                                <input id="txtLastname" class="form-control mt-3" type="text" placeholder="Doe" aria-label="Last Name">
                            </div>
                            <div class="d-flex justify-content-center align-items-center vh-40" style="max-width: 100%;">
                                <input id="txtStreetaddress" class="form-control mt-4 mr-2" type="text" placeholder="123 Main St" aria-label="Street Address">
                                <input id="txtStreetaddress2" class="form-control mt-4" type="text" placeholder="123 Main St" aria-label="Street Address 2">
                            </div>
                            <div class="d-flex justify-content-center align-items-center vh-40" style="max-width: 100%;">
                                <input id="txtCity" class="form-control mt-2 mr-2" type="text" placeholder="Nashville" aria-label="City">
                                <input id="txtState" class="form-control mt-2 mr-2" type="text" placeholder="Tennessee" aria-label="State">
                                <input id="txtZipcode" class="form-control mt-2" type="text" placeholder="12345" aria-label="zip code" pattern="[0-9]{5}">
                            </div>
                            <input id="intPhonenumber" class="form-control mt-4" type="tel" placeholder="123-456-7890" aria-label="tel" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}">
                <hr />
                <button class="btn btn-primary col-12 mt-2" type="button" id="btnRegister">Register</button>
                <button class="btn btn-link col-12 mt-2" type="button" id="btnSwapRegister">Already have an account? Login here</button>
            </div>
        </form>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        // Vanilla JS w/ query selector for Login form
        document.querySelector("#btnLogin").addEventListener("click",(e) => {
            const regEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/
            let strUsername = document.querySelector("#txtUsername").value
            const regPassword = /((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W]).{8,64})/
            let strPassword = document.querySelector("#txtPassword").value
            strUsername = strUsername.toLowerCase()
            let blnError = false
            let strMessage = ''

            if(!regEmail.test(strUsername)){
                blnError = true
                strMessage += '<p  class="mb-0 mt-0">Username must be an email address</p>'
            }
            
            if(regPassword.length < 1){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Password Cannot Be Blank</p>'
            }
            if(regPassword.length < 8){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Password must contain at least 8 character</p>'
            }
            if(!regPassword.test(strPassword)){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Password must contain at least one capitalized letter</p>'
                strMessage += '<p class="mb-0 mt-0">Password must contain at least one lower case letter</p>'
                strMessage += '<p class="mb-0 mt-0">Password must contain at least one special character such as !@#$%^&*()</p>'
            }
            
            if(blnError){
                Swal.fire({
                    title: "Oh no, you have an error!",
                    html: strMessage,
                    icon: "error"
                });  
            }else{
                Swal.fire({
                    title: "Good job!",
                    text: "Login success!",
                    icon: "success"
                });
            }
        })

        // Vanilla JS w/ query selector for Registration form
        document.querySelector("#btnRegister").addEventListener("click",(e) => {
            const regEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/
            let strUsername = document.querySelector("#txtRegisterUsername").value
            const regPassword = /((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W]).{8,64})/
            let strPassword = document.querySelector("#txtRegisterPassword").value
            strUsername = strUsername.toLowerCase()
            let strFirstName = document.querySelector("#txtFirstname").value
            let strLastName = document.querySelector("#txtLastname").value

            let strStreetAddress = document.querySelector("#txtStreetaddress").value
            
            let strCity = document.querySelector("#txtCity").value
            let strState = document.querySelector("#txtState").value
            let strZip = document.querySelector("#txtZipcode").value

            const regPhone = /^\s*(?:\+?(\d{1,3}))?([-. (]*(\d{3})[-. )]*)?((\d{3})[-. ]*(\d{2,4})(?:[-.x ]*(\d+))?)\s*$/
            let strPhone = document.querySelector("#intPhonenumber").value

            let blnError = false
            let strMessage = ''

            if(!regEmail.test(strUsername)){
                blnError = true
                strMessage += '<p  class="mb-0 mt-0">Username must be an email address</p>'
            }
            
            if(regPassword.length < 1){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Password Cannot Be Blank</p>'
            }
            if(regPassword.length < 8){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Password must contain at least 8 character</p>'
            }
            if(!regPassword.test(strPassword)){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Password must contain at least one capitalized letter</p>'
                strMessage += '<p class="mb-0 mt-0">Password must contain at least one lower case letter</p>'
                strMessage += '<p class="mb-0 mt-0">Password must contain at least one special character such as !@#$%^&*()</p>'
            }

            if(strFirstName.length < 1){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">First Name Cannot Be Blank</p>'
            }
            if(strLastName.length < 1){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Last Name Cannot Be Blank</p>'
            }
            if(strStreetAddress.length < 1){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Street Adress Cannot Be Blank</p>'
            }

            if(strCity.length < 1){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">City Cannot Be Blank</p>'
            }
            if(strState.length < 1){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">State Cannot Be Blank</p>'
            }
            if(strZip.trim().length < 5 || strZip.trim().length > 5){
                blnError = true
                strMessage += '<p>Zip code must be 5 numbers.</p>'
            }

            if(!regPhone.test(strPhone)){
                blnError = true
                strMessage += '<p>Not a valid phone number</p>'
            }

            if(blnError){
                Swal.fire({
                    title: "Oh no, you have an error!",
                    html: strMessage,
                    icon: "error"
                });  
            }else{
                Swal.fire({
                    title: "Good job!",
                    text: "Registration success!",
                    icon: "success"
                });
            }
        })

        // jQuery handler for btnSwapLogin
        $('#btnSwapLogin').on('click',function(){
            $('#frmLogin').slideUp('slow')
            $('#frmRegister').slideDown('fast')
        })

        //jQuery handler for btnSwapRegister
        $('#btnSwapRegister').on('click',function(){
            $('#frmRegister').slideUp('slow')
            $('#frmLogin').slideDown('fast')
        })
    </script>
</body>
</html>